<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>API Docs</title>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@stoplight/elements/web-components.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@stoplight/elements/styles.min.css"/>
  <style>
    .sl-bg-canvas {
      padding-left: 32px;
      padding-right: 32px;
    }

    [data-testid="two-column-right"] {
      margin-left: 0;
      max-width: 1200px !important;
      width: 100% !important;
      margin-right: 32px;
    }

    .sl-stack.sl-stack--vertical.sl-stack--8.HttpOperation.sl-flex.sl-flex-col.sl-items-stretch.sl-w-full > .sl-flex:nth-child(2) {
      flex-direction: column;

      .sl-w-0 {
        width: 100%;
      }
    }
  </style>
</head>
<body>
<elements-api
  apiDescriptionUrl="./swagger.json"
  router="hash"
  layout="sidebar"
></elements-api>

<script>
  function generateObserver(data) {
    let timeout;
    return function patchCurlSnippets() {
      const snippet = document.querySelector(`.sl-code-highlight.prism-code:not(.language-json)`);
      if (!snippet) {
        return
      }
      if (timeout) {
        clearTimeout(timeout);
      }
      timeout = setTimeout(() => {
        const matchedLang = Object.keys(data).find(lang => snippet.classList.contains(`language-${lang}`));
        if (matchedLang && snippet.dataset.lang) {
          if (snippet.dataset.lang === matchedLang) {
            console.log(`Matched with supporting lang ${matchedLang}, but already latest patch`);
          } else {
            snippet.dataset.lang = matchedLang;
            console.log(`Matched anther supporting lang ${matchedLang},remove old, apply new`);
          }
        } else if (matchedLang && !snippet.dataset.lang) {
          snippet.dataset.lang  = matchedLang;
          console.log(`Matched with ${matchedLang}, first patch required`);
        } else if (!matchedLang && !snippet.dataset.lang) {
          console.log("Current lang not support, it's not patched, nothing required ");
        } else if (!matchedLang && snippet.dataset.lang) {
          snippet.removeAttribute(`data-lang`);
          console.log("Change patch required due to not supporting lang");
        }
      }, 100)
    }
  }

  // Watch for dynamic updates AND subtree changes
  const observer = new MutationObserver(generateObserver(
    {
      'bash': [
        '  --cert cert.pem \\',
        '  --key key.pem \\',
        '  --cacert ca-cert.pem \\',
        '  --insecure \\'
      ],
      python: [
        ''
      ]
    },
  ));
  observer.observe(document.body, {childList: true, subtree: true, characterData: true});

</script>

</body>
</html>
