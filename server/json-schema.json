{
  "$ref": "#/definitions/config",
  "definitions": {
    "config": {
      "type": "object",
      "properties": {
        "ips": {
          "type": "object",
          "additionalProperties": {
            "type": "string",
            "anyOf": [
              {
                "format": "ipv4"
              },
              {
                "format": "ipv6"
              }
            ]
          },
          "description": "Definition of remote PCs where keys are PC names and values are their IP addresses. The IP address should be available to a remote PC. You can also use https://ngrok.com/ to get public address or create VPN "
        },
        "aliases": {
          "type": "object",
          "additionalProperties": {
            "anyOf": [
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              {
                "type": "string"
              }
            ]
          },
          "description": "A map for extra layer above destination property. E.g. you can define PC name in IPS section and instead of specifying PC name directly you can use aliases from this section that points to the PC name."
        },
        "delay": {
          "type": "number",
          "description": "Global delay in miliseconds between commands in order to prevent spam. Could be set to 0"
        },
        "combinations": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "commands": {
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "keySend": {
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "enum": [
                                        "a",
                                        "b",
                                        "c",
                                        "d",
                                        "e",
                                        "f",
                                        "g",
                                        "h",
                                        "i",
                                        "j",
                                        "k",
                                        "l",
                                        "m",
                                        "n",
                                        "o",
                                        "p",
                                        "q",
                                        "r",
                                        "s",
                                        "t",
                                        "u",
                                        "v",
                                        "w",
                                        "x",
                                        "y",
                                        "z",
                                        "f1",
                                        "f2",
                                        "f3",
                                        "f4",
                                        "f5",
                                        "f6",
                                        "f7",
                                        "f8",
                                        "f9",
                                        "f10",
                                        "f11",
                                        "f12",
                                        "f13",
                                        "f14",
                                        "f15",
                                        "f16",
                                        "f17",
                                        "f18",
                                        "f19",
                                        "f20",
                                        "f21",
                                        "f22",
                                        "f23",
                                        "f24",
                                        "0",
                                        "1",
                                        "2",
                                        "3",
                                        "4",
                                        "5",
                                        "6",
                                        "7",
                                        "8",
                                        "9",
                                        "numpad_0",
                                        "numpad_1",
                                        "numpad_2",
                                        "numpad_3",
                                        "numpad_4",
                                        "numpad_5",
                                        "numpad_6",
                                        "numpad_7",
                                        "numpad_8",
                                        "numpad_9",
                                        "numpad_decimal",
                                        "space",
                                        "escape",
                                        "tab",
                                        "alt",
                                        "control",
                                        "right_alt",
                                        "right_control",
                                        "win",
                                        "right_win",
                                        "cmd",
                                        "right_cmd",
                                        "menu",
                                        "fn",
                                        "shift",
                                        "command",
                                        "right_shift",
                                        "command",
                                        "`",
                                        "-",
                                        "=",
                                        "backspace",
                                        "[",
                                        "]",
                                        "\\",
                                        ";",
                                        "'",
                                        "enter",
                                        ",",
                                        ".",
                                        "/",
                                        "left",
                                        "up",
                                        "right",
                                        "down",
                                        "printscreen",
                                        "insert",
                                        "delete",
                                        "home",
                                        "end",
                                        "pageup",
                                        "pagedown",
                                        "add",
                                        "subtract",
                                        "multiply",
                                        "divide",
                                        "enter",
                                        "caps_lock",
                                        "scroll_lock",
                                        "num_lock",
                                        "audio_mute",
                                        "audio_vol_down",
                                        "audio_vol_up",
                                        "audio_play",
                                        "audio_stop",
                                        "audio_pause",
                                        "audio_prev",
                                        "audio_next",
                                        "audio_rewind",
                                        "audio_forward",
                                        "audio_repeat",
                                        "audio_random"
                                      ],
                                      "description": "A key to be sent."
                                    },
                                    {
                                      "type": "string",
                                      "pattern": "\\{\\{\\w+\\}\\}",
                                      "description": "Inject variable with this name. Either can be an environment variable, either a variables passed to a macro from variables section"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/0"
                                      }
                                    }
                                  ]
                                },
                                "holdKeys": {
                                  "anyOf": [
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/0"
                                    },
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    },
                                    {
                                      "type": "array",
                                      "items": {
                                        "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/0"
                                      }
                                    }
                                  ],
                                  "description": "A key to be sent."
                                },
                                "destination": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    }
                                  ],
                                  "description": "Remote PC from ips or aliases section to send this command to"
                                },
                                "delay": {
                                  "anyOf": [
                                    {
                                      "type": "number"
                                    },
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    }
                                  ],
                                  "description": "Delay in milliseconds before the next command."
                                }
                              },
                              "required": [
                                "keySend",
                                "destination"
                              ],
                              "additionalProperties": false,
                              "description": "Sends a keyPress to a remote PC."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "mouseMoveX": {
                                  "anyOf": [
                                    {
                                      "type": "number"
                                    },
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    }
                                  ],
                                  "description": "X coordinate"
                                },
                                "mouseMoveY": {
                                  "anyOf": [
                                    {
                                      "type": "number"
                                    },
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    }
                                  ],
                                  "description": "Y coordinate"
                                },
                                "destination": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/destination"
                                },
                                "delay": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/delay"
                                }
                              },
                              "required": [
                                "mouseMoveX",
                                "mouseMoveY",
                                "destination"
                              ],
                              "additionalProperties": false,
                              "description": "Moves mouse to specified coordinates and clicks with left button"
                            },
                            {
                              "type": "object",
                              "properties": {
                                "launch": {
                                  "type": "string",
                                  "description": "Full path to an executable."
                                },
                                "arguments": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  },
                                  "description": "Array of arguments to an executable"
                                },
                                "waitTillFinish": {
                                  "type": "boolean",
                                  "description": "Waits until executable finishes to run before running the next command"
                                },
                                "assignId": {
                                  "type": "string",
                                  "description": "Assigns PID of launched command to a variable that can be used after"
                                },
                                "destination": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/destination"
                                },
                                "delay": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/delay"
                                }
                              },
                              "required": [
                                "launch",
                                "destination"
                              ],
                              "additionalProperties": false,
                              "description": "Starts a program on a remote PC."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "focusPid": {
                                  "anyOf": [
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    },
                                    {
                                      "type": "number"
                                    }
                                  ],
                                  "description": "Pid of the process that has this window"
                                },
                                "destination": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/destination"
                                },
                                "delay": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/delay"
                                }
                              },
                              "required": [
                                "focusPid",
                                "destination"
                              ],
                              "additionalProperties": false,
                              "description": "Focuses window with the provided PID, making it active"
                            },
                            {
                              "type": "object",
                              "properties": {
                                "typeText": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    }
                                  ],
                                  "description": "Any string to type"
                                },
                                "destination": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/destination"
                                },
                                "delay": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/delay"
                                }
                              },
                              "required": [
                                "typeText",
                                "destination"
                              ],
                              "additionalProperties": false,
                              "description": "Types text on the remote PC."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "kill": {
                                  "anyOf": [
                                    {
                                      "type": "string"
                                    },
                                    {
                                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/keySend/anyOf/1"
                                    }
                                  ],
                                  "description": "Executable file name. E.g. Chrome.exe"
                                },
                                "destination": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/destination"
                                },
                                "delay": {
                                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/delay"
                                }
                              },
                              "required": [
                                "kill",
                                "destination"
                              ],
                              "additionalProperties": false,
                              "description": "Kills a process on the remote PC."
                            }
                          ],
                          "description": "A remote command"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "macro": {
                              "type": "string",
                              "description": "Name of the macro (key from macros section object)"
                            },
                            "variables": {
                              "type": "object",
                              "additionalProperties": {
                                "type": [
                                  "string",
                                  "number"
                                ]
                              },
                              "description": "Object of a key-values of variable name and value"
                            },
                            "delay": {
                              "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0/anyOf/0/properties/delay"
                            }
                          },
                          "required": [
                            "macro"
                          ],
                          "additionalProperties": false,
                          "description": "Runs a macro from the macros section."
                        }
                      ],
                      "description": "A remote command or a macro name"
                    },
                    "description": "List of commands for different commands"
                  },
                  "threads": {
                    "type": "array",
                    "items": {
                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands"
                    },
                    "description": "This option should be defined only if commands attribute is absent. Same as commands but array of arrays of commands. Top level of array executes in parallel"
                  },
                  "delay": {
                    "type": "number",
                    "description": "Delay in milliseconds between commands for this shorcut"
                  },
                  "name": {
                    "type": "string",
                    "description": "Name that is printed during startup with a shorcut"
                  },
                  "shortCut": {
                    "type": "string",
                    "description": "A shorcut to be pressed. E.g. Alt+1"
                  }
                },
                "required": [
                  "name",
                  "shortCut"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "circular": {
                    "type": "boolean",
                    "description": "If set to true. Commands in this chain will be executed in a circular way. So each press = 1 command. Instead of full commands"
                  },
                  "shuffle": {
                    "type": "boolean",
                    "description": "If circular set to true, commands in this event would be executed randomly by 1"
                  },
                  "commands": {
                    "type": "array",
                    "items": {
                      "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items/anyOf/0"
                    },
                    "description": "List of commands for different commands"
                  },
                  "delay": {
                    "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/delay"
                  },
                  "name": {
                    "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/name"
                  },
                  "shortCut": {
                    "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/shortCut"
                  }
                },
                "required": [
                  "commands",
                  "name",
                  "shortCut"
                ],
                "additionalProperties": false,
                "description": "An event schema that represent a set of commands that is executed when a certain shortkey is pressed"
              }
            ]
          },
          "description": "Shorcuts mappings. Main logic"
        },
        "macros": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "commands": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/config/properties/combinations/items/anyOf/0/properties/commands/items"
                },
                "description": "Set of commands for this macro"
              },
              "variables": {
                "type": "object",
                "additionalProperties": {
                  "anyOf": [
                    {
                      "not": {}
                    },
                    {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": [
                            "string",
                            "number"
                          ],
                          "description": "To validate the type, or cast from env variables"
                        },
                        "optional": {
                          "type": "boolean",
                          "description": "If set to true, the key is be removed is var is not passed"
                        }
                      },
                      "required": [
                        "type"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "description": "Set of variables descriptors for macro"
              }
            },
            "required": [
              "commands",
              "variables"
            ],
            "additionalProperties": false,
            "description": "A macro that can be injected instead of command. That will run commands from its body. Can be also injected with variables. Think of it like a function"
          },
          "description": "A map of macros where a key is the macro name and value is its body"
        }
      },
      "required": [
        "ips",
        "delay",
        "combinations"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}